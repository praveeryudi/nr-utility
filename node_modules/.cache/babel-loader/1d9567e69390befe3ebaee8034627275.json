{"ast":null,"code":"/**\n * Stores result from supportsCssVariables to avoid redundant processing to\n * detect CSS custom variable support.\n */\nvar supportsCssVariables_;\n\nfunction detectEdgePseudoVarBug(windowObj) {\n  // Detect versions of Edge with buggy var() support\n  // See: https://developer.microsoft.com/en-us/microsoft-edge/platform/issues/11495448/\n  var document = windowObj.document;\n  var node = document.createElement('div');\n  node.className = 'mdc-ripple-surface--test-edge-var-bug'; // Append to head instead of body because this script might be invoked in the\n  // head, in which case the body doesn't exist yet. The probe works either way.\n\n  document.head.appendChild(node); // The bug exists if ::before style ends up propagating to the parent element.\n  // Additionally, getComputedStyle returns null in iframes with display: \"none\" in Firefox,\n  // but Firefox is known to support CSS custom properties correctly.\n  // See: https://bugzilla.mozilla.org/show_bug.cgi?id=548397\n\n  var computedStyle = windowObj.getComputedStyle(node);\n  var hasPseudoVarBug = computedStyle !== null && computedStyle.borderTopStyle === 'solid';\n\n  if (node.parentNode) {\n    node.parentNode.removeChild(node);\n  }\n\n  return hasPseudoVarBug;\n}\n\nexport function supportsCssVariables(windowObj, forceRefresh) {\n  if (forceRefresh === void 0) {\n    forceRefresh = false;\n  }\n\n  var CSS = windowObj.CSS;\n  var supportsCssVars = supportsCssVariables_;\n\n  if (typeof supportsCssVariables_ === 'boolean' && !forceRefresh) {\n    return supportsCssVariables_;\n  }\n\n  var supportsFunctionPresent = CSS && typeof CSS.supports === 'function';\n\n  if (!supportsFunctionPresent) {\n    return false;\n  }\n\n  var explicitlySupportsCssVars = CSS.supports('--css-vars', 'yes'); // See: https://bugs.webkit.org/show_bug.cgi?id=154669\n  // See: README section on Safari\n\n  var weAreFeatureDetectingSafari10plus = CSS.supports('(--css-vars: yes)') && CSS.supports('color', '#00000000');\n\n  if (explicitlySupportsCssVars || weAreFeatureDetectingSafari10plus) {\n    supportsCssVars = !detectEdgePseudoVarBug(windowObj);\n  } else {\n    supportsCssVars = false;\n  }\n\n  if (!forceRefresh) {\n    supportsCssVariables_ = supportsCssVars;\n  }\n\n  return supportsCssVars;\n}\nexport function getNormalizedEventCoords(evt, pageOffset, clientRect) {\n  if (!evt) {\n    return {\n      x: 0,\n      y: 0\n    };\n  }\n\n  var x = pageOffset.x,\n      y = pageOffset.y;\n  var documentX = x + clientRect.left;\n  var documentY = y + clientRect.top;\n  var normalizedX;\n  var normalizedY; // Determine touch point relative to the ripple container.\n\n  if (evt.type === 'touchstart') {\n    var touchEvent = evt;\n    normalizedX = touchEvent.changedTouches[0].pageX - documentX;\n    normalizedY = touchEvent.changedTouches[0].pageY - documentY;\n  } else {\n    var mouseEvent = evt;\n    normalizedX = mouseEvent.pageX - documentX;\n    normalizedY = mouseEvent.pageY - documentY;\n  }\n\n  return {\n    x: normalizedX,\n    y: normalizedY\n  };\n}","map":{"version":3,"sources":["util.ts"],"names":[],"mappings":"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","sourceRoot":"","sourcesContent":["/**\n * Stores result from supportsCssVariables to avoid redundant processing to\n * detect CSS custom variable support.\n */\nvar supportsCssVariables_;\nfunction detectEdgePseudoVarBug(windowObj) {\n    // Detect versions of Edge with buggy var() support\n    // See: https://developer.microsoft.com/en-us/microsoft-edge/platform/issues/11495448/\n    var document = windowObj.document;\n    var node = document.createElement('div');\n    node.className = 'mdc-ripple-surface--test-edge-var-bug';\n    // Append to head instead of body because this script might be invoked in the\n    // head, in which case the body doesn't exist yet. The probe works either way.\n    document.head.appendChild(node);\n    // The bug exists if ::before style ends up propagating to the parent element.\n    // Additionally, getComputedStyle returns null in iframes with display: \"none\" in Firefox,\n    // but Firefox is known to support CSS custom properties correctly.\n    // See: https://bugzilla.mozilla.org/show_bug.cgi?id=548397\n    var computedStyle = windowObj.getComputedStyle(node);\n    var hasPseudoVarBug = computedStyle !== null && computedStyle.borderTopStyle === 'solid';\n    if (node.parentNode) {\n        node.parentNode.removeChild(node);\n    }\n    return hasPseudoVarBug;\n}\nexport function supportsCssVariables(windowObj, forceRefresh) {\n    if (forceRefresh === void 0) { forceRefresh = false; }\n    var CSS = windowObj.CSS;\n    var supportsCssVars = supportsCssVariables_;\n    if (typeof supportsCssVariables_ === 'boolean' && !forceRefresh) {\n        return supportsCssVariables_;\n    }\n    var supportsFunctionPresent = CSS && typeof CSS.supports === 'function';\n    if (!supportsFunctionPresent) {\n        return false;\n    }\n    var explicitlySupportsCssVars = CSS.supports('--css-vars', 'yes');\n    // See: https://bugs.webkit.org/show_bug.cgi?id=154669\n    // See: README section on Safari\n    var weAreFeatureDetectingSafari10plus = (CSS.supports('(--css-vars: yes)') &&\n        CSS.supports('color', '#00000000'));\n    if (explicitlySupportsCssVars || weAreFeatureDetectingSafari10plus) {\n        supportsCssVars = !detectEdgePseudoVarBug(windowObj);\n    }\n    else {\n        supportsCssVars = false;\n    }\n    if (!forceRefresh) {\n        supportsCssVariables_ = supportsCssVars;\n    }\n    return supportsCssVars;\n}\nexport function getNormalizedEventCoords(evt, pageOffset, clientRect) {\n    if (!evt) {\n        return { x: 0, y: 0 };\n    }\n    var x = pageOffset.x, y = pageOffset.y;\n    var documentX = x + clientRect.left;\n    var documentY = y + clientRect.top;\n    var normalizedX;\n    var normalizedY;\n    // Determine touch point relative to the ripple container.\n    if (evt.type === 'touchstart') {\n        var touchEvent = evt;\n        normalizedX = touchEvent.changedTouches[0].pageX - documentX;\n        normalizedY = touchEvent.changedTouches[0].pageY - documentY;\n    }\n    else {\n        var mouseEvent = evt;\n        normalizedX = mouseEvent.pageX - documentX;\n        normalizedY = mouseEvent.pageY - documentY;\n    }\n    return { x: normalizedX, y: normalizedY };\n}\n//# sourceMappingURL=util.js.map"]},"metadata":{},"sourceType":"module"}